{% extends 'base.html' %}

{% block meta %}
<meta property="og:site_name"
      content="{{app_name}}" />
<meta property="og:title"
      content="{{book.title}} by {{', '.join(book.authors)}}" />
<meta property="og:url"
      content="{{this_url}}" />
<meta property="og:image"
      content="{{book.cover_url}}" />
<meta property="og:description"
      content="" />
<meta property="og:type"
      content="books.book" />
<meta property="books:author"
      content="{{', '.join(book.authors)}}" />
{% endblock %}

{% block content %}
<div id="book"></div>
{% endblock %}

{% block templates %}
<script type="text/x-template" id="book-permalink-tmpl">
  <div id="book-permalink" title="<%= book.title %>">
    <img class="cover-permalink"
         src="<%= book.cover_url %>" />
    <div>
      <% if (localCalibre.showImportLinks(book.library_uuid)) { %>
      <a href="http://127.0.0.1:56665/?urls=<%= metadata_urls %>" class="import"
         title="import book directly to calibre" target="import">
        <span class="lodestone">
          <img src="/images/lodestone.png" title="import book directly to calibre" />
        </span>
      </a>
      <% } %>
    </div>
    <p><span class="attr">Title:</span> <%= book.title %></p>
    <p><span class="attr">Authors:</span> <%= book.authors %></p>
    <p><span class="attr">Publisher:</span> <%= book.publisher %></p> 

    <% if (book.formats[0] != '0') { %>
    <p><span class="attr">Download:</span> 
      <% for( var i = 0; i < book.formats.length; i++ ) { %>
        <% var format = book.formats[i] %>
        <a href="<%= book.prefix_url + book.format_metadata[format].file_path %>"><%= format.toUpperCase() %></a>
      <% } %>
    </p>
    <% } %>

    <p><span class="attr">About:</span> <%= book.comments %></p></br>
    <p><a href="<%= book.prefix_url %>" target="_blank">Browse only <%= book.librarian %>'s library</a></p>
  </div>
</script>
{% endblock %}

{% block scripts %}
<script type="application/javascript" src="/static/b.js"></script>
{% endblock %}
